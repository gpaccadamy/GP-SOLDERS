<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Pre-Recorded Classes - GP Soldier Academy</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: white;
    min-height: 100vh;
  }

  header {
    background: linear-gradient(to right, #FF9933, #138808);
    padding: 20px;
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    box-shadow: 0 4px 20px rgba(0,0,0,0.6);
    position: relative;
  }
  .back-btn {
    position: absolute; left: 15px; top: 18px;
    background: rgba(255,255,255,0.2); padding: 10px 15px;
    border-radius: 50%; font-size: 20px; cursor: pointer;
  }

  .container {
    padding: 20px;
  }

  .title {
    text-align: center;
    font-size: 36px;
    margin: 20px 0;
    color: #FF9933;
    text-shadow: 0 0 15px #000;
  }

  .subtitle {
    text-align: center;
    font-size: 20px;
    margin-bottom: 30px;
    opacity: 0.9;
  }

  .video-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 25px;
    max-width: 800px;
    margin: 0 auto;
  }

  .video-card {
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    border: 3px solid transparent;
    transition: all 0.4s;
  }
  .video-card:hover {
    transform: translateY(-10px);
    border-color: #FF9933;
  }

  .video-header {
    background: linear-gradient(45deg, #c41e3a, #ff6b35);
    padding: 15px;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
  }

  .video-body {
    padding: 20px;
    text-align: center;
  }

  .subject {
    font-size: 28px;
    color: #FF9933;
    margin: 10px 0;
  }

  .class-tag {
    display: inline-block;
    background: #FFD700;
    color: #000;
    padding: 8px 20px;
    border-radius: 30px;
    font-weight: bold;
    margin: 10px 0;
  }

  .video-frame {
    width: 100%;
    height: 250px;
    border: none;
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.4);
  }

  .no-video {
    text-align: center;
    padding: 60px;
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    margin: 40px auto;
    max-width: 500px;
  }

  .footer {
    text-align: center;
    padding: 40px 20px;
    background: rgba(0,0,0,0.5);
    margin-top: 50px;
  }
  .jaihind {
    font-size: 36px;
    color: #FF9933;
    text-shadow: 0 0 20px #000;
  }
</style>
</head>
<body>

<header>
  <div class="back-btn" onclick="history.back()">Back</div>
  GP SOLDIER ACADEMY
</header>

<div class="container">
  <h1 class="title">PRE-RECORDED CLASSES</h1>
  <p class="subtitle">Watch Anytime • कधीही पाहा • Anytime Study</p>

  <div id="videoContainer" class="video-grid">
    <!-- Videos will load here from Admin Panel -->
  </div>
</div>

<div class="footer">
  <div class="jaihind">भारत माता की जय</div>
  <div class="jaihind">JAI HIND</div>
  <p style="margin-top:15px; opacity:0.8;">Train Hard • Fight Easy</p>
</div>

<script>
// YOUR BACKEND URL - 100% CORRECT
const API = 'https://academy-backend-e02j.onrender.com/api';

async function loadVideos() {
  try {
    const res = await fetch(`${API}/videos`);
    const { videos } = await res.json();

    const container = document.getElementById('videoContainer');

    if (videos.length === 0) {
      container.innerHTML = `
        <div class="no-video">
          <h2>No Videos Yet</h2>
          <p>Admin will upload pre-recorded classes soon.<br>Stay ready, Soldier!</p>
          <p style="margin-top:20px; font-size:40px;">भारत माता की जय</p>
        </div>`;
      return;
    }

    container.innerHTML = videos.map(video => `
      <div class="video-card">
        <div class="video-header">
          PRE-RECORDED TRAINING
        </div>
        <div class="video-body">
          <div class="subject">${video.subject}</div>
          <div class="class-tag">CLASS ${video.classNum}</div>
          <iframe class="video-frame"
            src="${video.embedUrl}"
            title="${video.subject} Class ${video.classNum}"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
          </iframe>
        </div>
      </div>
    `).join('');

  } catch (err) {
    document.getElementById('videoContainer').innerHTML = `
      <div class="no-video">
        <h2>Connection Failed</h2>
        <p>Please check internet and try again.</p>
      </div>`;
  }
}

// Load videos when page opens
loadVideos();
</script>

</body>
</html>
